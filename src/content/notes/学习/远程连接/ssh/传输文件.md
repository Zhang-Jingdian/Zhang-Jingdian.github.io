---
tags:
  - ip
  - linux
  - mac
  - ssh
  - ubuntu
  - scp
  - sftp
  - sshfs
---
***📁 文件传输笔记 （Mac ↔ Ubuntu）**

---

## 1. 🏎️ `scp`：安全复制（一次性、脚本化）

- **上传单个文件**
    
    ```bash
    scp /本地/路径/file.txt zjd@192.168.1.102:/远程/路径/
    ```
    
- **下载单个文件**
    
    ```bash
    scp zjd@192.168.1.102:/远程/路径/file.txt /本地/路径/
    ```
    
- **递归上传目录**
    
    ```bash
    scp -r /本地/文件夹 zjd@192.168.1.102:/远程/路径/
    ```
    
- **常用参数**
    
    - `-P 端口号`：指定非 22 端口
        
    - `-p`：保留时间戳与权限
        

---

## 2. 🤝 `sftp`：交互式传输（浏览＋断点续传）

1. **连接服务器**
    
    ```bash
    sftp zjd@192.168.1.102
    ```
    
2. **常用命令**
    
    |命令|说明|
    |---|---|
    |`ls` / `lls`|列出远程／本地文件|
    |`cd` / `lcd`|切换远程／本地目录|
    |`get 文件`|下载文件|
    |`put 文件`|上传文件|
    |`get -r 目录`|递归下载目录|
    |`put -r 目录`|递归上传目录|
    |`reget` / `reput`|断点续传|
    |`exit`|退出会话|
    
3. **指定端口或密钥**
    
    ```bash
    sftp -oPort=2222 -oIdentityFile=~/.ssh/id_rsa zjd@IP
    ```
    

---

## 3. 🔑 免密码登录（Key-Based Auth）

```bash
# 生成密钥（推荐 ed25519）
ssh-keygen -t ed25519

# 上传公钥
ssh-copy-id zjd@192.168.1.102

# 测试（无需密码）
ssh zjd@192.168.1.102
```

> **~/.ssh/config 示例**
> 
> ```text
> Host ubuntuhome
>   HostName 192.168.1.102
>   User zjd
>   IdentityFile ~/.ssh/id_ed25519
>   Port 22
>   UseKeychain yes         # macOS 专用
>   AddKeysToAgent yes      # 自动加入 ssh-agent
> ```

---

## 4. 💾 `sshfs`：远程挂载（像本地磁盘）

1. **安装（推荐 gromgit tap）**
    
    ```bash
    brew install --cask macfuse
    brew tap gromgit/fuse
    brew install gromgit/fuse/sshfs-mac
    ```
    
2. **挂载**
    
    ```bash
    mkdir -p ~/mnt/ubuntu
    sshfs ubuntuhome:/home/zjd/projects ~/mnt/ubuntu
    ```
    
3. **卸载**
    
    ```bash
    umount ~/mnt/ubuntu
    # 或
    diskutil unmount ~/mnt/ubuntu
    ```
    

---

## 5. 🚀 高级技巧

- **连接复用**（加速多次操作）
    
    ```text
    Host *
      ControlMaster auto
      ControlPath ~/.ssh/cm-%r@%h:%p
      ControlPersist 10m
    ```
    
- **断点续传 & 大文件**
    
    ```bash
    rsync -avP -e "ssh -p 2222" 本地/ zjd@IP:/远程/
    ```
    
- **自动化脚本**
    
    ```bash
    #!/bin/bash
    sshfs ubuntuhome:/home/zjd/projects ~/mnt/ubuntu && open ~/mnt/ubuntu
    ```
    
- **挂载参数**
    
    - `-o reconnect`：断线自动重连
        
    - `-o allow_other`：其他用户可访问（视情况开启）
        

---

✨ 以上就是 Mac ↔ Ubuntu 文件传输的全家桶，从 “一键复制” 到 “像本地磁盘” 都涵盖；配合 **免密码登录** 与 **SSH 配置**，让你秒传无忧！

有任何疑问或需要一键脚本，随时吼我~ 🐱‍💻